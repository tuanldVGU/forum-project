<%layout('./partials/threadLayout')%>
<div class="profile mx-auto container">
  <div class="row" id="vue-profile">
    <div class="col-md-3">
      <div class="prof-img">
        <img v-bind:src="usr.avatar">
        <div class="img-title">
            <a role="button" id="changeImg" class="btn btn-white"  data-toggle="modal" data-target="#createModal">Change Avatar</a>
          </div>
      </div>
    </div>
    <div class="col-md-9">
      <div class="prof-info">
        <h2>Your Information</h2>
        <div class="u-info">
          <label>Name:</label> {{usr.username}}
        </div>
        <div class="u-info">
          <label>Email:</label> {{usr.email}}
        </div>
        <div class="u-info">
          <label>Role:</label> {{usr.userType}}
        </div>
      </div>
    </div>
    <!-- Create Modal -->
    <div class="modal fade bd-example-modal-lg " id="createModal" tabindex="-1" role="dialog" aria-labelledby="createModal" aria-hidden="true">
      <div class="modal-dialog" role="document"> 
        <div class="modal-content h-425">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Avatar Update</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body" class="form-post">
                  <iframe src="/profileUpd/" frameborder="0"></iframe>
                </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Your post -->
  <div class="container-fluid" style="padding: 5rem 3rem 1rem;" id='vue-profile-post'>
    <h2>Your post</h2>
    <table class="table table-hover table-bottom-border">
        <thead>
            <tr>
                <th scope="col">Title</th>
                <th scope="col">CreatedAt</th>
                <th scope="col">Modify</th>
                <th scope="col">Delete</th>
            </tr>
        </thead>
        <tbody>
            <tr v-for="row in posts">
                <td><a v-bind:href="'/forum/article?id='+row._id">{{row.title}}</a></td>
                <td>{{row.createdAt}}</td>
                <td><a v-bind:href="'/forum/modifyPost?id='+row._id" class="btn"><i class="fas fa-wrench"></i></a></td>
                <td><a role="button" class="btn" v-on:click="deleteReminder(row._id,row.forumList)"  data-toggle="modal" data-target="#emailModal"><i class="fas fa-eraser"></i></a></td>
            </tr>
        </tbody>
    </table>
    <!-- Delete Modal -->
    <div class="modal fade" id="emailModal" tabindex="-1" role="dialog" aria-labelledby="emailModal" aria-hidden="true">
      <div class="modal-dialog" role="document"> 
        <div class="modal-content">
                <div class="modal-body">
                  <p class="lead">Do you want to delete the post</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-primary" v-on:click="deletePost(parseData.pid,parseData.fid)">Continue</button>
                  <button type="button" class="btn btn-secondary" data-dismiss="modal" >Close</button>
                </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="/js/components/profileControl.js" type="module"></script>
